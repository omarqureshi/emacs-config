class CreateUsers < ActiveRecord::Migration
  def change
    execute <<EOF

create sequence users_id_seq start 1 increment 1 no cycle;
create table users(
  id                       integer not null default nextval('users_id_seq'),
  email                    text not null,
  password_digest          text not null,
  activation_token         text,
  forgotten_password_token text,
  activated_at             timestamp with time zone,
  created_at               timestamp with time zone not null default now(),
  updated_at               timestamp with time zone not null default now(),
  primary key(id)
);

create unique index users_lower_email_idx on users(lower(email));
EOF
  end

end
